<?xml version="1.0" encoding="UTF-8"?>
<MovilizerMovelet moveletKey="FEXCHECK" moveletKeyExtension="" namespace="" mafAppSpace="" privateNamespace="true" icon="7" moveletType="MULTI" metaMoveletType="NONE" initialQuestionKey="1" transactional="false" priority="0" syncPriority="NONE" visible="true" moveletVersion="0" xmlns="http://movilitas.com/movilizer/v16">
      <question key="1" title="Select Location" type="6" backNavigationAllowed="true" sortAnswersByClientKey="false" tableRowDetailsEnabled="true" tableOptionsEnabled="true">
        <answer key="#1_1" nextQuestionKey="2" dummyAnswer="true"/>
        <text>Select Location of Fire Extinguisher and Hose Reel</text>
        <onEnterAssignment><!-- This MEL event is triggered upon user entering the screen/ question -->
    		addAnswers($answer:'#1_1', $local:fexLocations);
		</onEnterAssignment>
      </question>
      <question key="2" title="Observations Checklist" type="4" backNavigationAllowed="true" sortAnswersByClientKey="false" tableRowDetailsEnabled="true" tableOptionsEnabled="true">
        <answer key="#2_1" nextQuestionKey="3" position="0" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false">
          <text>Assigned in proper location</text>
        </answer>
        <answer key="#2_2" nextQuestionKey="3" position="1" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false">
          <text>Readily accessible</text>
        </answer>
        <answer key="#2_3" nextQuestionKey="3" position="2" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false">
          <text>Securely fitted</text>
        </answer>
        <answer key="#2_4" nextQuestionKey="3" position="3" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false">
          <text>Signage in place</text>
        </answer>
        <answer key="#2_5" nextQuestionKey="3" position="4" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false">
          <text>Operating instructions are legible</text>
        </answer>
        <answer key="#2_6" nextQuestionKey="3" position="5" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false">
          <text>Fire extinguisher anti-tamper device intact</text>
        </answer>
        <answer key="#2_7" nextQuestionKey="3" position="6" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false">
          <text>Maintenance record (white stickers) are present and legible</text>
        </answer>
        <answer key="#2_8" nextQuestionKey="3" position="7" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false">
          <text>Annual inspection tag is firmly attached and current</text>
        </answer>
        <answer key="#2_9" nextQuestionKey="3" position="8" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false">
          <text>Asset is clean, free of corrosion and visual damage</text>
        </answer>
        <text>List of Observations Noted By Inspector</text>
      </question>
      <question key="3" title="Additional Observations" type="3" backNavigationAllowed="true" sortAnswersByClientKey="false" tableRowDetailsEnabled="true" tableOptionsEnabled="true">
        <answer key="#3_1" nextQuestionKey="4" position="0" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false"/>
        <text>Additional observations noted by inspector</text>
      </question>
      <question key="4" title="Take A Photo Of The Asset" type="10" backNavigationAllowed="true" sortAnswersByClientKey="false" tableRowDetailsEnabled="true" tableOptionsEnabled="true">
        <answer key="#4_1" nextQuestionKey="5" position="0" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false"/>
        <text>Current photo of the asset</text>
      </question>
      <question key="5" title="Inspection Sign-Off" type="11" backNavigationAllowed="true" sortAnswersByClientKey="false" tableRowDetailsEnabled="true" tableOptionsEnabled="true">
        <answer attributeType="73" key="#5_1" nextQuestionKey="END" position="0" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false"/>
        <answer key="#5_2" nextQuestionKey="END" position="1" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false"/>
        <answer attributeType="68" key="#5_3" nextQuestionKey="END" position="2" action="NONE" onScreenValueChangeEventTrigger="NONE" timerBasedScreenValueChangeEvent="false" dummyAnswer="false" sortAnswerItemsByClientKey="false"/>
        <text>I hereby declare that the I personally inspected the asset today</text>
      </question>
      <syncDownloadAssignment>
                pool                = $masterdata:'felocations'; 
                group               = 'felocations';                
                filterConfig        = {};                  
                $local:returnConfig = {'result' : 'all';};
                $local:entryName    = 'Locations';      
                    
                $local:loadMasterdata = function(myPool, myGroup, myFilter, myReturn, myEntry, $ref:fexLocations)
                {
                    allFeLocations = queryMasterdata(myPool, myGroup, myFilter, myReturn);
                     
                    for(i : allFeLocations)
                    {
                        fexLocations[i] = allMasterData[i]['data'][myEntry];
                    }
                };
            </syncDownloadAssignment>
      <name>Fire Extinguisher and Hose Reel Inspection Register</name>
      <masterdata pool="felocations" systemId="16980002" />
      <onMasterdataChange>
                <!-- Apply to all groups in the pool -->
                <filter pool="felocations" group="felocations" />
                <trigger>
                    function (pool, group, key, op)
                    {
                        <!-- 1: Execute on master data record updates -->
                        if (op == 1)
                        {
                            <!-- on master data record update: update only the relevant record -->
                            updatedMD = getMasterdata(pool, key);
                            $local:masterData[key] = updatedMD['data'][$local:entryName];
                        }
                        <!-- 2: Execute on master data record deletion -->
                        if (op == 2)
                        {
                            <!-- on master data record deletion: null only the relevant values -->
                            $local:masterData[key] = null;
                        }
                        <!-- 3: Execute on master data group deletion -->
                        if (op == 3)
                        {
                            <!-- on master data group deletion: reset array and query master data again -->
                            $local:masterData = null;
                            group = null;
                            call($local:loadMasterdata)(pool, group, filterConfig, $local:returnConfig, $local:entryName, $local:masterData);
                        }
                    }
                </trigger>
            </onMasterdataChange>
</MovilizerMovelet>